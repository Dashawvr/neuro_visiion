(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{c5dafba67a1325040c24:function(e,t,a){"use strict";a.r(t);a("bf1d8adc682e62674784");var r,n=a("8af190b70a6bc55c6f1b"),o=a.n(n),i=a("28bec5ee11448146977e"),d=a("8150d8ea4ad5de2d230c"),c=a("4fb4be7a5324bde8ca25"),s=a("3ecf08427fbbdff28abe"),l=a("5f98817700ae8fbd73e9"),u=a("bd183afcc37eabd79225"),f=a.n(u),b=a("34b72919d4f639adf396"),y=a("3ead0690618f0035f026");function h(e,t,a,n){r||(r="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),1===i)t.children=n;else if(i>1){for(var d=new Array(i),c=0;c<i;c++)d[c]=arguments[c+3];t.children=d}if(t&&o)for(var s in o)void 0===t[s]&&(t[s]=o[s]);else t||(t=o||{});return{$$typeof:r,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function p(e,t,a,r,n,o,i){try{var d=e[o](i),c=d.value}catch(e){return void a(e)}d.done?t(c):Promise.resolve(c).then(r,n)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var i,d=e[Symbol.iterator]();!(r=(i=d.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(n)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var w,v={},x={},z=h(d.a,{}),I=h(c.a,{}),S=h(s.a,{}),R=function(e){var t=g(Object(n.useState)({x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height}),2),a=t[0],r=(t[1],g(Object(n.useState)(""),2)),d=r[0],c=r[1],s=g(Object(n.useState)({zIndex:e.zIndex}),2),u=s[0],m=(s[1],{widget_data_id:e.id});Object(n.useEffect)((function(){var t=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("".concat(y.f,"/api/widget_data/stream_play"),m).then((function(e){c(e.data.data.streamUrl)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){p(o,r,n,i,d,"next",e)}function d(e){p(o,r,n,i,d,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();"video"===e.type&&t()}),[]);switch(e.type){case"table":switch(e.data){case"users":return h(i.a,{className:"widgetTable",bounds:".app",default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},disableDragging:!0,enableResizing:!1},void 0,z);case"role":return h(i.a,{className:"widgetTable",bounds:".app",default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},disableDragging:!0,enableResizing:!1},void 0,I);case"dashboard":return h(i.a,{className:"widgetTable",bounds:".app",default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},disableDragging:!0,enableResizing:!1},void 0,S);default:console.log("\u041d\u0435\u043c\u0430\u0454 \u0442\u0430\u043a\u043e\u0457 \u0442\u0430\u0431\u043b\u0438\u0446\u0456")}break;case"map":return h(i.a,{className:"widgetMap",bounds:".app",default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},disableDragging:!0,enableResizing:!1},void 0,h(l.a,{lat:e.data.lat?e.data.lat:10,lon:e.data.lon?e.data.lon:10,markerLat:e.styles.lat?e.styles.lat:10,markerLon:e.styles.lon?e.styles.lon:10,dragging:!0}));case"text":return h(i.a,{className:"widgetText",bounds:".app",default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},disableDragging:!0,enableResizing:!1},void 0,h("marquee",{behavior:"scroll",direction:"left",hspace:"10px",scrollamount:e.styles.speed,style:{fontSize:e.styles.fontSize+"px"}},void 0,e.data?e.data:""));case"video":return d.length?h(i.a,{className:"widgetVideo",bounds:".app",style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},disableDragging:!0,enableResizing:!1},void 0,h(b.a,{wrapperClassName:"video-wrapper-".concat(e.id),size:{width:a.width,height:a.height},videoUrl:d,options:v,overlayOptions:x,onRef:function(e){return e}})):o.a.createElement(o.a.Fragment,null);case"doc":case"link":case"image":return h(i.a,{className:"widgetVideo",bounds:".app",style:{zIndex:u.zIndex,border:"".concat(e.styles.size,"px solid ").concat(e.styles.color),borderRadius:e.styles.borderRadius,backgroundColor:e.styles.color},default:{x:e.coordinate.x,y:e.coordinate.y,width:e.coordinate.width,height:e.coordinate.height},disableDragging:!0,enableResizing:!1},void 0,h("iframe",{width:"100%",height:a.height,src:e.data?e.data:""}));default:return o.a.createElement(o.a.Fragment,null)}},j=a("fac38cb2790d5cb9cce1"),O=a("e95a63b25fb92ed15721"),k=a("63d0249d2e2f59180ae5");function A(e,t,a,r){w||(w="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var n=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),1===o)t.children=r;else if(o>1){for(var i=new Array(o),d=0;d<o;d++)i[d]=arguments[d+3];t.children=i}if(t&&n)for(var c in n)void 0===t[c]&&(t[c]=n[c]);else t||(t=n||{});return{$$typeof:w,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function C(e,t,a,r,n,o,i){try{var d=e[o](i),c=d.value}catch(e){return void a(e)}d.done?t(c):Promise.resolve(c).then(r,n)}function D(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var o=e.apply(t,a);function i(e){C(o,r,n,i,d,"next",e)}function d(e){C(o,r,n,i,d,"throw",e)}i(void 0)}))}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var i,d=e[Symbol.iterator]();!(r=(i=d.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==d.return||d.return()}finally{if(n)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}t.default=Object(k.a)()((function(e){var t=_(Object(n.useState)([]),2),a=t[0],r=t[1],i=_(Object(n.useState)([]),2),d=i[0],c=i[1],s=_(Object(n.useState)([]),2),l=s[0],u=s[1],b=_(Object(n.useState)([]),2),h=b[0],p=b[1],g=_(Object(n.useState)([]),2),m=g[0],w=g[1],v=_(Object(n.useState)([]),2),x=v[0],z=v[1],I=Object(O.useHistory)(),S=I.location.pathname.split("/")[3];Object(n.useEffect)((function(){function e(){return(e=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(y.f,"/api/dashboard/").concat(S)).then((function(e){r(e.data.data.Dashboard.widgetdates)}));case 2:return e.next=4,f.a.get("".concat(y.f,"/api/dashboard/").concat(S)).then((function(e){c(e.data.data.Dashboard.widgetdates)}));case 4:return e.next=6,f.a.get("".concat(y.f,"/api/dashboard/").concat(S)).then((function(e){p(e.data.data.Dashboard)}));case 6:return e.next=8,f.a.get("".concat(y.f,"/api/widget_data")).then((function(e){u(e.data.data.WidgetDates.rows)}));case 8:return e.next=10,f.a.get("".concat(y.f,"/api/users")).then((function(e){w(e.data.data.users.rows)}));case 10:return e.next=12,f.a.get("".concat(y.f,"/api/camera")).then((function(e){z(e.data.data.cameras.rows)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[I.location.pathname]),a.map((function(e){m.map((function(t){t.id===e.authorId&&(e.authorId=t.name)}))})),a.map((function(e){"video"===e.type&&x.map((function(t){t.id===e.data&&(e.data=t.ip?t.ip:t.username)}))}));var k={x:10,y:10,width:"200px",height:"200px"},C={zIndex:1,border:"1px solid black",borderRadius:"none",backgroundColor:"white"};return A("div",{},void 0,a?a.map((function(e){return A(R,{data:e.data,type:e.type,coordinatesId:e.widgetCoordinatesId,id:e.id,zIndex:e.z_index?e.z_index:1,styles:e.styles?e.styles:C,coordinate:e.widget_coordinate?e.widget_coordinate:k},e.id)})):o.a.createElement(o.a.Fragment,null),A(j.a,{widgets:d,allWidgets:l,dashboardId:S,dashboard:h}))}))}}]);