(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"45a3ae99b26a68768e3c":function(t,e,n){"use strict";n.r(e);var o,r=n("8af190b70a6bc55c6f1b"),i=n.n(r),a=n("0d7f0986bcd2f33d8a2a"),c=n("1037a6e0d5914309f74c"),u=n.n(c),d=n("6938d226fd372a75cbf9"),f=n("4dd2a92e69dcbe1bab10"),s=(n("8a2d1b95e05b6a321e74"),n("b02fe3f80d4238b52f20")),l=n.n(s),b=n("edc5ec6b13db97ea0a32"),p=n("63bac7d5ea40ecc9ba06"),h=n.n(p),y=n("435859b6b76fb67a754a"),v=n.n(y),m=(n("2618892602a0e7905b7d"),n("16c7abd7abc407b9f247")),w=n.n(m),g=n("ab4cb61bcb2dc161defb"),O=n("d7dd51e1bf6bfc2c9c3d"),S=n("2aea235afd5c55b8b19b"),j=n.n(S),_=n("c09d19c0d058d138126d"),k=n.n(_),R=n("36164894564e60edef62"),x=n("2a1bd40fccfa6f84a987"),P=n("5e98cee1846dbfd41421"),D=n("63d0249d2e2f59180ae5");function E(t){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e,n,r){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=t&&t.defaultProps,a=arguments.length-3;if(e||0===a||(e={children:void 0}),1===a)e.children=r;else if(a>1){for(var c=new Array(a),u=0;u<a;u++)c[u]=arguments[u+3];e.children=c}if(e&&i)for(var d in i)void 0===e[d]&&(e[d]=i[d]);else e||(e=i||{});return{$$typeof:o,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function W(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=A(t);if(e){var r=A(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==E(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $,N=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,n,o,r=W(i);function i(){return I(this,i),r.apply(this,arguments)}return e=i,(n=[{key:"render",value:function(){var t=this.props,e=t.classes,n=t.handleSubmit,o=t.pristine,r=t.reset,i=t.submitting,a=t.dashboards,c=t.widgets,u=t.handleDashboard,d=t.t;return C("div",{},void 0,C(v.a,{container:!0,spacing:3,alignItems:"flex-start",direction:"row",justify:"center"},void 0,C(v.a,{item:!0,xs:12,md:6},void 0,C(l.a,{className:e.root},void 0,C("form",{onSubmit:n},void 0,C("div",{},void 0,C(w.a,{className:e.field},void 0,C(k.a,{htmlFor:"dashboardId"},void 0,d("EditWidget.dashboard")),C(b.Field,{name:"dashboardId",component:R.b,placeholder:d("EditWidget.dashboard"),required:!0,onChange:u},void 0,a.map((function(t){return C(h.a,{value:t.id},void 0," ",t.name," ")}))))),C("div",{},void 0,C(w.a,{className:e.field},void 0,C(k.a,{htmlFor:"widget"},void 0,d("EditWidget.widget")),C(b.Field,{name:"widget",component:R.b,placeholder:d("EditWidget.widget"),required:!0},void 0,c.map((function(t){return C(h.a,{value:t.id},void 0,t.name)}))))),C("div",{},void 0,C(j.a,{variant:"contained",color:"secondary",type:"submit",disabled:i},void 0,d("Buttons.submit")),C(j.a,{type:"button",disabled:o||i,onClick:r},void 0,d("Buttons.reset")),C(j.a,{variant:"contained",color:"primary",onClick:function(){return P.a.goBack()}},void 0,d("Buttons.cancel"))))))))}}])&&T(e.prototype,n),o&&T(e,o),i}(r.Component),q=Object(b.reduxForm)({form:"addWidget",enableReinitialize:!0})(N),G=Object(O.connect)((function(t){return{force:t,initialValues:t.getIn(["initval","formValues"])}}),(function(t){return{init:Object(g.bindActionCreators)(x.b,t),clear:function(){return t(x.a)}}}))(q),J=Object(d.withStyles)((function(t){return{root:{flexGrow:1,padding:30},field:{width:"100%",marginBottom:20},fieldBasic:{width:"100%",marginBottom:20,marginTop:10},inlineWrap:{display:"flex",flexDirection:"row"},buttonInit:{margin:t.spacing(4),textAlign:"center"}}}))(Object(D.a)()(G)),V=n("f363639bc5c3c97af546"),z=n("3ead0690618f0035f026"),H=n("e649e14cabb39045d52c"),M=n("e95a63b25fb92ed15721");function K(t){return(K="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function L(t,e,n,o){$||($="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=t&&t.defaultProps,i=arguments.length-3;if(e||0===i||(e={children:void 0}),1===i)e.children=o;else if(i>1){for(var a=new Array(i),c=0;c<i;c++)a[c]=arguments[c+3];e.children=a}if(e&&r)for(var u in r)void 0===e[u]&&(e[u]=r[u]);else e||(e=r||{});return{$$typeof:$,type:t,key:void 0===n?null:""+n,ref:null,props:e,_owner:null}}function Q(t,e,n,o,r,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(o,r)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function X(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return tt(this,n)}}function tt(t,e){return!e||"object"!==K(e)&&"function"!==typeof e?et(t):e}function et(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(d,t);var e,n,o,r,i,c=Z(d);function d(){var t;U(this,d);for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return ot(et(t=c.call.apply(c,[this].concat(n))),"state",{variant:"",message:"",open:!1,dashboards:[],widgets:[],widget:{}}),ot(et(t),"handleClose",(function(e,n){"clickaway"!==n&&t.setState({open:!1})})),t}return e=d,(n=[{key:"componentDidMount",value:function(){var t=this;Object(V.a)("".concat(z.f,"/api/dashboard/"),z.b).then((function(e){t.setState({dashboards:e.data.Dashboards.rows})}))}},{key:"handleDashboard",value:function(t){var e=this,n=t.target.value;Object(V.a)("".concat(z.f,"/api/dashboard/").concat(n),z.b).then((function(t){e.setState({widgets:t.data.Dashboard.widget_data})}))}},{key:"redirectToEdit",value:function(t,e){switch(t){case"video":this.props.history.push("/home/forms/edit/video?widgetId="+e);break;case"map":this.props.history.push("/home/forms/edit/map?widgetId="+e);break;case"table":this.props.history.push("/home/forms/edit/table?widgetId="+e);break;case"text":this.props.history.push("/home/forms/edit/text?widgetId="+e)}}},{key:"showResult",value:(r=regeneratorRuntime.mark((function t(e){var n,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e._root.entries[1][1],Object(V.a)("".concat(z.f,"/api/widget_data/").concat(n),z.b).then((function(t){o.setState({widget:t.data.widgetData})})),setTimeout((function(){return o.redirectToEdit(o.state.widget.type,n)}),2e3);case 3:case"end":return t.stop()}}),t)})),i=function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){Q(i,n,o,a,c,"next",t)}function c(t){Q(i,n,o,a,c,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=u.a.name+" - Form",n=u.a.desc,o=this.state,r=o.message,i=o.variant,c=o.open,d=this.props.t;return L("div",{},void 0,L(a.Helmet,{},void 0,L("title",{},void 0,e),L("meta",{name:"description",content:n}),L("meta",{property:"og:title",content:e}),L("meta",{property:"og:description",content:n}),L("meta",{property:"twitter:title",content:e}),L("meta",{property:"twitter:description",content:n})),L(f.db,{title:d("EditWidget.title"),icon:"ios-list-box-outline"},void 0,L("div",{},void 0,L(J,{onSubmit:function(e){return t.showResult(e)},widgets:this.state.widgets,handleDashboard:function(e){return t.handleDashboard(e)},dashboards:this.state.dashboards}))),L(H.a,{open:c,handleClose:function(){return t.handleClose()},variant:i,message:r}))}}])&&X(e.prototype,n),o&&X(e,o),d}(i.a.Component);e.default=Object(d.withStyles)({root:{flexGrow:1}})(Object(M.withRouter)(Object(D.a)()(rt)))}}]);